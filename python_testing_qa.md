# üêç Python –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –í–æ–ø—Ä–æ—Å—ã –∏ –û—Ç–≤–µ—Ç—ã

## –û—Å–Ω–æ–≤—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Python

**Q: –ß—Ç–æ —Ç–∞–∫–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Python?**
A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Python - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π –∫–æ–¥–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –æ—à–∏–±–∫–∏ –∏ —É–±–µ–∂–¥–∞—Ç—å—Å—è, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ª–æ–º–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞ –∫–æ–¥–∞
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ

**Q: –ö–∞–∫–∏–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤ –±—ã–≤–∞—é—Ç –≤ Python?**
A:

| –¢–∏–ø —Ç–µ—Å—Ç–∞ | –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç | –ü—Ä–∏–º–µ—Ä |
|-----------|---------------|---------|
| **Unit —Ç–µ—Å—Ç—ã** | –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏/–º–µ—Ç–æ–¥—ã | `test_add_numbers()` |
| **Integration —Ç–µ—Å—Ç—ã** | –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | `test_database_connection()` |
| **Functional —Ç–µ—Å—Ç—ã** | –ü–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ | `test_user_registration()` |
| **Performance —Ç–µ—Å—Ç—ã** | –°–∫–æ—Ä–æ—Å—Ç—å –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | `test_api_response_time()` |

## –ú–æ–¥—É–ª—å unittest

**Q: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å unittest?**
A: `unittest` - —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å Python –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤.

**–ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞:**
```python
import unittest

def add_numbers(a, b):
    return a + b

class TestMathFunctions(unittest.TestCase):
    
    def test_add_positive_numbers(self):
        """–¢–µ—Å—Ç —Å–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª"""
        result = add_numbers(2, 3)
        self.assertEqual(result, 5)
    
    def test_add_negative_numbers(self):
        """–¢–µ—Å—Ç —Å–ª–æ–∂–µ–Ω–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª"""
        result = add_numbers(-1, -2)
        self.assertEqual(result, -3)
    
    def test_add_zero(self):
        """–¢–µ—Å—Ç —Å–ª–æ–∂–µ–Ω–∏—è —Å –Ω—É–ª–µ–º"""
        result = add_numbers(5, 0)
        self.assertEqual(result, 5)
    
    def test_add_floats(self):
        """–¢–µ—Å—Ç —Å–ª–æ–∂–µ–Ω–∏—è –¥—Ä–æ–±–Ω—ã—Ö —á–∏—Å–µ–ª"""
        result = add_numbers(1.5, 2.5)
        self.assertAlmostEqual(result, 4.0, places=1)

if __name__ == '__main__':
    unittest.main()
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
python -m unittest test_math.py
python -m unittest test_math.TestMathFunctions.test_add_positive_numbers
```

**Q: –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã assert –¥–æ—Å—Ç—É–ø–Ω—ã –≤ unittest?**
A:

```python
import unittest

class TestAssertions(unittest.TestCase):
    
    def test_assertions(self):
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞
        self.assertEqual(2 + 2, 4)
        self.assertNotEqual(2 + 2, 5)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏
        self.assertTrue(True)
        self.assertFalse(False)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ None
        self.assertIsNone(None)
        self.assertIsNotNone("not none")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è
        self.assertIn(1, [1, 2, 3])
        self.assertNotIn(4, [1, 2, 3])
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
        self.assertIsInstance("hello", str)
        self.assertNotIsInstance(123, str)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
        with self.assertRaises(ValueError):
            int("not a number")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å—é (–¥–ª—è float)
        self.assertAlmostEqual(3.14159, 3.14, places=2)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
        self.assertRegex("hello world", r"hello")
        self.assertNotRegex("hello world", r"bye")
```

## Pytest - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

**Q: –ß—Ç–æ —Ç–∞–∫–æ–µ pytest –∏ —á–µ–º –æ–Ω –ª—É—á—à–µ unittest?**
A: Pytest - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Python, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∏ –º–æ—â–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ pytest:**
- ‚úÖ –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- ‚úÖ –õ—É—á—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –§–∏–∫—Å—Ç—É—Ä—ã (fixtures)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –ü–ª–∞–≥–∏–Ω—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ pytest:**
```bash
pip install pytest
pip install pytest-cov  # –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
pip install pytest-mock  # –¥–ª—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è
```

**Q: –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –≤ pytest?**
A:

```python
# test_calculator.py

def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b == 0:
        raise ValueError("–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!")
    return a / b

# –¢–µ—Å—Ç—ã
def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
    assert add(0, 0) == 0

def test_subtract():
    assert subtract(5, 3) == 2
    assert subtract(1, 1) == 0
    assert subtract(0, 5) == -5

def test_multiply():
    assert multiply(2, 3) == 6
    assert multiply(-2, 3) == -6
    assert multiply(0, 5) == 0

def test_divide():
    assert divide(6, 2) == 3
    assert divide(5, 2) == 2.5
    assert divide(-6, 2) == -3

def test_divide_by_zero():
    import pytest
    with pytest.raises(ValueError, match="–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!"):
        divide(5, 0)
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
pytest test_calculator.py
pytest test_calculator.py -v  # –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
pytest test_calculator.py::test_add  # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
```

## –§–∏–∫—Å—Ç—É—Ä—ã –≤ pytest

**Q: –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏ –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**
A: –§–∏–∫—Å—Ç—É—Ä—ã - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ–±—ä–µ–∫—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤.

**–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ñ–∏–∫—Å—Ç—É—Ä:**
```python
import pytest

@pytest.fixture
def sample_list():
    """–§–∏–∫—Å—Ç—É—Ä–∞, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Å–ø–∏—Å–æ–∫"""
    return [1, 2, 3, 4, 5]

@pytest.fixture
def sample_dict():
    """–§–∏–∫—Å—Ç—É—Ä–∞, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Å–ª–æ–≤–∞—Ä—å"""
    return {"name": "John", "age": 30}

def test_list_operations(sample_list):
    """–¢–µ—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∏–∫—Å—Ç—É—Ä—ã —Å–ø–∏—Å–∫–∞"""
    assert len(sample_list) == 5
    assert 3 in sample_list
    assert sum(sample_list) == 15

def test_dict_operations(sample_dict):
    """–¢–µ—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∏–∫—Å—Ç—É—Ä—ã —Å–ª–æ–≤–∞—Ä—è"""
    assert sample_dict["name"] == "John"
    assert sample_dict["age"] == 30
    assert len(sample_dict) == 2
```

**–§–∏–∫—Å—Ç—É—Ä—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏ –æ—á–∏—Å—Ç–∫–æ–π:**
```python
import pytest
import tempfile
import os

@pytest.fixture
def temp_file():
    """–§–∏–∫—Å—Ç—É—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏ –æ—á–∏—Å—Ç–∫–æ–π"""
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞
    temp = tempfile.NamedTemporaryFile(delete=False)
    temp.write(b"test data")
    temp.close()
    
    yield temp.name  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞
    
    # –û—á–∏—Å—Ç–∫–∞
    os.unlink(temp.name)

def test_file_operations(temp_file):
    """–¢–µ—Å—Ç —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º"""
    with open(temp_file, 'r') as f:
        content = f.read()
    assert content == "test data"
```

**–§–∏–∫—Å—Ç—É—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
```python
import pytest

@pytest.fixture(params=[1, 2, 3, 4, 5])
def number(request):
    """–§–∏–∫—Å—Ç—É—Ä–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏"""
    return request.param

def test_number_is_positive(number):
    """–¢–µ—Å—Ç –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω 5 —Ä–∞–∑ —Å —Ä–∞–∑–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏"""
    assert number > 0
    assert number <= 5
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

**Q: –ö–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –≤ pytest?**
A: –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –æ–¥–∏–Ω —Ç–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–æ—Å—Ç–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è:**
```python
import pytest

@pytest.mark.parametrize("a, b, expected", [
    (1, 2, 3),
    (0, 0, 0),
    (-1, 1, 0),
    (10, 20, 30),
])
def test_addition(a, b, expected):
    assert a + b == expected

@pytest.mark.parametrize("input_str, expected", [
    ("hello", "HELLO"),
    ("world", "WORLD"),
    ("", ""),
    ("Python", "PYTHON"),
])
def test_uppercase(input_str, expected):
    assert input_str.upper() == expected
```

**–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è:**
```python
import pytest

@pytest.mark.parametrize("x", [1, 2, 3])
@pytest.mark.parametrize("y", [10, 20])
def test_multiple_params(x, y):
    """–¢–µ—Å—Ç –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω 6 —Ä–∞–∑ (3 x 2)"""
    assert x * y > 0
    assert x * y <= 60
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Å ID:**
```python
import pytest

@pytest.mark.parametrize("test_input,expected", [
    ("3+5", 8),
    ("2+4", 6),
    ("6*9", 54),
], ids=["addition_1", "addition_2", "multiplication"])
def test_eval(test_input, expected):
    assert eval(test_input) == expected
```

## –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ (Mocking)

**Q: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö?**
A: –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–∞ –∏–º–∏—Ç–∞—Ü–∏–∏ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ unittest.mock:**
```python
from unittest.mock import Mock, patch, MagicMock
import pytest

# –ü—Ä–æ—Å—Ç–æ–π –º–æ–∫
def test_mock_basic():
    mock = Mock()
    mock.some_method.return_value = 42
    
    assert mock.some_method() == 42
    mock.some_method.assert_called_once()

# –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
def get_user_data(user_id):
    # –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ API
    pass

@patch('module.get_user_data')
def test_with_mocked_function(mock_get_user):
    mock_get_user.return_value = {"id": 1, "name": "John"}
    
    result = get_user_data(1)
    assert result["name"] == "John"
    mock_get_user.assert_called_once_with(1)
```

**–ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å pytest-mock:**
```python
import pytest

def test_with_pytest_mock(mocker):
    # –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
    mock_func = mocker.patch('module.some_function')
    mock_func.return_value = "mocked result"
    
    # –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
    mock_class = mocker.patch('module.SomeClass')
    mock_instance = mock_class.return_value
    mock_instance.method.return_value = "mocked method"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–æ–≤
    assert mock_func.called
    assert mock_instance.method.called
```

**–ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö API:**
```python
import requests
from unittest.mock import patch

def get_weather(city):
    response = requests.get(f"https://api.weather.com/{city}")
    return response.json()

@patch('requests.get')
def test_get_weather(mock_get):
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–∫–∞
    mock_response = Mock()
    mock_response.json.return_value = {"temperature": 25, "city": "Moscow"}
    mock_get.return_value = mock_response
    
    # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
    result = get_weather("Moscow")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∏
    assert result["temperature"] == 25
    assert result["city"] == "Moscow"
    mock_get.assert_called_once_with("https://api.weather.com/Moscow")
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤

**Q: –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã –≤ Python?**
A:

**–ü—Ä–∏–º–µ—Ä –∫–ª–∞—Å—Å–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```python
class Calculator:
    def __init__(self):
        self.history = []
    
    def add(self, a, b):
        result = a + b
        self.history.append(f"{a} + {b} = {result}")
        return result
    
    def subtract(self, a, b):
        result = a - b
        self.history.append(f"{a} - {b} = {result}")
        return result
    
    def get_history(self):
        return self.history
    
    def clear_history(self):
        self.history.clear()
```

**–¢–µ—Å—Ç—ã –¥–ª—è –∫–ª–∞—Å—Å–∞:**
```python
import pytest

class TestCalculator:
    
    @pytest.fixture
    def calculator(self):
        """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞"""
        return Calculator()
    
    def test_add(self, calculator):
        """–¢–µ—Å—Ç –º–µ—Ç–æ–¥–∞ —Å–ª–æ–∂–µ–Ω–∏—è"""
        result = calculator.add(2, 3)
        assert result == 5
        assert len(calculator.history) == 1
        assert calculator.history[0] == "2 + 3 = 5"
    
    def test_subtract(self, calculator):
        """–¢–µ—Å—Ç –º–µ—Ç–æ–¥–∞ –≤—ã—á–∏—Ç–∞–Ω–∏—è"""
        result = calculator.subtract(5, 3)
        assert result == 2
        assert len(calculator.history) == 1
        assert calculator.history[0] == "5 - 3 = 2"
    
    def test_history(self, calculator):
        """–¢–µ—Å—Ç –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π"""
        calculator.add(1, 2)
        calculator.subtract(5, 3)
        
        history = calculator.get_history()
        assert len(history) == 2
        assert history[0] == "1 + 2 = 3"
        assert history[1] == "5 - 3 = 2"
    
    def test_clear_history(self, calculator):
        """–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏"""
        calculator.add(1, 2)
        calculator.clear_history()
        assert len(calculator.history) == 0
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**Q: –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ Python?**
A:

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ pytest:**
```python
import pytest

def divide(a, b):
    if b == 0:
        raise ValueError("–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!")
    return a / b

def test_divide_by_zero():
    """–¢–µ—Å—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ –Ω–æ–ª—å"""
    with pytest.raises(ValueError) as exc_info:
        divide(5, 0)
    
    assert str(exc_info.value) == "–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!"

def test_divide_by_zero_message():
    """–¢–µ—Å—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è"""
    with pytest.raises(ValueError, match="–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!"):
        divide(5, 0)

def test_divide_success():
    """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è"""
    result = divide(6, 2)
    assert result == 3
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π:**
```python
class InsufficientFundsError(Exception):
    pass

class BankAccount:
    def __init__(self, balance=0):
        self.balance = balance
    
    def withdraw(self, amount):
        if amount > self.balance:
            raise InsufficientFundsError(f"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤. –ë–∞–ª–∞–Ω—Å: {self.balance}")
        self.balance -= amount
        return amount

def test_insufficient_funds():
    """–¢–µ—Å—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤"""
    account = BankAccount(100)
    
    with pytest.raises(InsufficientFundsError) as exc_info:
        account.withdraw(200)
    
    assert "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤" in str(exc_info.value)
    assert account.balance == 100  # –ë–∞–ª–∞–Ω—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
```

## –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (Code Coverage)

**Q: –ö–∞–∫ –∏–∑–º–µ—Ä—è—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏?**
A: –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∞—è —á–∞—Å—Ç—å –∫–æ–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ coverage:**
```bash
pip install coverage
pip install pytest-cov
```

**–ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Å pytest-cov:**
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –ø–æ–∫—Ä—ã—Ç–∏—è
pytest --cov=my_module tests/
pytest --cov=my_module --cov-report=html tests/
pytest --cov=my_module --cov-report=term-missing tests/
```

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**
```python
# calculator.py
def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b == 0:
        raise ValueError("–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!")
    return a / b

# test_calculator.py
import pytest
from calculator import add, subtract, multiply, divide

def test_add():
    assert add(2, 3) == 5

def test_subtract():
    assert subtract(5, 3) == 2

def test_multiply():
    assert multiply(2, 3) == 6

def test_divide():
    assert divide(6, 2) == 3

def test_divide_by_zero():
    with pytest.raises(ValueError):
        divide(5, 0)
```

**–ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º:**
```bash
pytest --cov=calculator test_calculator.py --cov-report=term-missing
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**Q: –ö–∞–∫ –ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã?**
A: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

**–ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:**
```python
import pytest
import sqlite3
from unittest.mock import patch

class UserService:
    def __init__(self, db_connection):
        self.db = db_connection
    
    def create_user(self, username, email):
        cursor = self.db.cursor()
        cursor.execute(
            "INSERT INTO users (username, email) VALUES (?, ?)",
            (username, email)
        )
        self.db.commit()
        return cursor.lastrowid
    
    def get_user(self, user_id):
        cursor = self.db.cursor()
        cursor.execute("SELECT * FROM users WHERE id = ?", (user_id,))
        return cursor.fetchone()

@pytest.fixture
def db_connection():
    """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    conn = sqlite3.connect(':memory:')
    cursor = conn.cursor()
    cursor.execute('''
        CREATE TABLE users (
            id INTEGER PRIMARY KEY,
            username TEXT NOT NULL,
            email TEXT NOT NULL
        )
    ''')
    conn.commit()
    yield conn
    conn.close()

def test_user_creation_and_retrieval(db_connection):
    """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    service = UserService(db_connection)
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_id = service.create_user("john_doe", "john@example.com")
    assert user_id is not None
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user = service.get_user(user_id)
    assert user is not None
    assert user[1] == "john_doe"  # username
    assert user[2] == "john@example.com"  # email
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**Q: –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Python?**
A:

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```python
from flask import Flask, jsonify, request

app = Flask(__name__)

@app.route('/api/users', methods=['GET'])
def get_users():
    return jsonify({"users": ["John", "Jane"]})

@app.route('/api/users', methods=['POST'])
def create_user():
    data = request.get_json()
    if not data or 'name' not in data:
        return jsonify({"error": "Name is required"}), 400
    return jsonify({"message": f"User {data['name']} created"}), 201

# –¢–µ—Å—Ç—ã
import pytest
from app import app

@pytest.fixture
def client():
    """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞"""
    app.config['TESTING'] = True
    with app.test_client() as client:
        yield client

def test_get_users(client):
    """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
    response = client.get('/api/users')
    assert response.status_code == 200
    data = response.get_json()
    assert 'users' in data
    assert len(data['users']) == 2

def test_create_user_success(client):
    """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    response = client.post('/api/users', 
                          json={'name': 'Alice'})
    assert response.status_code == 201
    data = response.get_json()
    assert 'User Alice created' in data['message']

def test_create_user_missing_name(client):
    """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –∏–º–µ–Ω–∏"""
    response = client.post('/api/users', 
                          json={})
    assert response.status_code == 400
    data = response.get_json()
    assert data['error'] == 'Name is required'
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

**Q: –ö–∞–∫–∏–µ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Python?**
A:

**1. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:**
```python
# –•–æ—Ä–æ—à–æ
def test_user_can_login_with_valid_credentials():
    pass

def test_user_cannot_login_with_invalid_password():
    pass

# –ü–ª–æ—Ö–æ
def test_login():
    pass
```

**2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ (AAA - Arrange, Act, Assert):**
```python
def test_calculate_discount():
    # Arrange (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
    price = 100
    discount_percent = 20
    
    # Act (–¥–µ–π—Å—Ç–≤–∏–µ)
    final_price = calculate_discount(price, discount_percent)
    
    # Assert (–ø—Ä–æ–≤–µ—Ä–∫–∞)
    assert final_price == 80
```

**3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä:**
```python
@pytest.fixture
def sample_user():
    return {
        "id": 1,
        "name": "John Doe",
        "email": "john@example.com"
    }

def test_user_operations(sample_user):
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å—Ç—É—Ä—É –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ—Å—Ç–µ
    assert sample_user["name"] == "John Doe"
```

**4. –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:**
```python
# –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
def test_user_creation():
    user = create_user("test", "test@example.com")
    assert user.name == "test"

def test_user_deletion():
    user = create_user("test", "test@example.com")
    delete_user(user.id)
    assert get_user(user.id) is None
```

**5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:**
```python
def test_edge_cases():
    # –ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    assert process_data("") == ""
    
    # –û—á–µ–Ω—å –±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
    assert process_data("a" * 1000) is not None
    
    # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
    assert process_data("!@#$%^&*()") is not None
```

**6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–∏:**
```python
@pytest.mark.parametrize("input,expected", [
    ("hello", "HELLO"),
    ("", ""),
    ("123", "123"),
])
def test_uppercase(input, expected):
    assert input.upper() == expected
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã pytest

**Q: –ö–∞–∫–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã pytest?**
A:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
pytest -v

# –û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
pytest -vv

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest test_file.py::test_function

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –º–∞—Ä–∫–µ—Ä—É
pytest -m "slow"

# –ü—Ä–æ–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest -x  # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest --maxfail=2  # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Å–ª–µ 2 –æ—à–∏–±–æ–∫

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
pytest -n auto

# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
pytest --cov=my_module --cov-report=html

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
pytest -l

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
pytest --random-order

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest --durations=10
```

## –ú–∞—Ä–∫–µ—Ä—ã –≤ pytest

**Q: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ä–∫–µ—Ä—ã –≤ pytest?**
A:

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤:**
```python
import pytest

@pytest.mark.slow
def test_slow_operation():
    """–ú–µ–¥–ª–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç"""
    import time
    time.sleep(2)
    assert True

@pytest.mark.integration
def test_database_connection():
    """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç"""
    assert True

@pytest.mark.unit
def test_fast_function():
    """–ë—ã—Å—Ç—Ä—ã–π unit —Ç–µ—Å—Ç"""
    assert True
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –º–∞—Ä–∫–µ—Ä–∞–º:**
```bash
# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
pytest -m slow

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∫—Ä–æ–º–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö
pytest -m "not slow"

# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
pytest -m integration

# –ó–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç–æ–≤
pytest -m unit
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ pytest.ini:**
```ini
[tool:pytest]
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
```

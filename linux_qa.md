# Linux - Вопросы и Ответы

## Текстовые редакторы

### Vim
**Q: Как открыть файл в vim?**
A: `vim filename` или `vi filename`

**Q: Как выйти из vim без сохранения?**
A: `:q!` или `Esc` затем `:q!`

**Q: Как сохранить и выйти из vim?**
A: `:wq` или `:x`

**Q: Как перейти в режим вставки в vim?**
A: Нажать `i` (вставка), `a` (после курсора), `o` (новая строка)

**Q: Как найти текст в vim?**
A: `/текст` - поиск вперед, `?текст` - поиск назад

### Nano
**Q: Как открыть файл в nano?**
A: `nano filename`

**Q: Как сохранить файл в nano?**
A: `Ctrl + O`, затем Enter

**Q: Как выйти из nano?**
A: `Ctrl + X`

**Q: Как найти текст в nano?**
A: `Ctrl + W`

## Основные команды и утилиты

### Процессы и ресурсы

**Q: Как посмотреть запущенные процессы?**
A: 
- `ps aux` - все процессы с подробной информацией
- `ps -ef` - все процессы в формате Unix
- `top` - интерактивный просмотр процессов
- `htop` - улучшенная версия top

**Q: Как найти самый прожорливый процесс в Linux?**
A:
- `top` - нажать `M` для сортировки по памяти
- `ps aux --sort=-%mem | head -10` - топ 10 по памяти
- `ps aux --sort=-%cpu | head -10` - топ 10 по CPU

**Q: Как убить процесс по имени?**
A:
- `pkill process_name`
- `killall process_name`
- `kill $(pgrep process_name)`

**Q: Как посмотреть использование памяти?**
A:
- `free -h` - использование RAM и swap
- `cat /proc/meminfo` - детальная информация о памяти
- `vmstat` - статистика виртуальной памяти

**Q: Как посмотреть загрузку CPU?**
A:
- `top` или `htop`
- `uptime` - средняя нагрузка
- `cat /proc/loadavg` - текущая нагрузка

### Файловая система

**Q: Как посмотреть сколько места на корневом разделе?**
A:
- `df -h` - использование дискового пространства
- `df -h /` - только корневой раздел
- `du -sh /*` - размер директорий в корне

**Q: Как посмотреть содержимое папки?**
A:
- `ls` - список файлов
- `ls -la` - подробный список с скрытыми файлами
- `ls -lh` - размеры в человекочитаемом формате
- `tree` - древовидная структура

**Q: Как заархивировать файлы?**
A:
- `tar -czf archive.tar.gz files/` - создать gzip архив
- `tar -cjf archive.tar.bz2 files/` - создать bzip2 архив
- `zip archive.zip files/` - создать zip архив
- `7z a archive.7z files/` - создать 7z архив

**Q: Как распаковать архив?**
A:
- `tar -xzf archive.tar.gz` - распаковать gzip архив
- `tar -xjf archive.tar.bz2` - распаковать bzip2 архив
- `unzip archive.zip` - распаковать zip архив
- `7z x archive.7z` - распаковать 7z архив

### Поиск и фильтрация

**Q: Что такое утилита grep?**
A: grep - это утилита для поиска текста в файлах. Примеры:
- `grep "pattern" file` - поиск в файле
- `grep -r "pattern" directory/` - рекурсивный поиск
- `grep -i "pattern" file` - игнорировать регистр
- `grep -v "pattern" file` - исключить строки с паттерном

**Q: Как найти файлы по имени?**
A:
- `find /path -name "filename"` - поиск по точному имени
- `find /path -iname "filename"` - игнорировать регистр
- `find /path -name "*.txt"` - поиск по расширению
- `locate filename` - быстрый поиск по базе данных

### Сетевая диагностика

**Q: С помощью какой утилиты посмотреть открытые порты?**
A:
- `netstat -tulpn` - все открытые порты
- `ss -tulpn` - современная замена netstat
- `lsof -i` - процессы использующие сеть
- `nmap localhost` - сканирование портов

**Q: Как работать с командой ifconfig?**
A: `ifconfig` - утилита для настройки и просмотра сетевых интерфейсов:

**Основные команды:**
```bash
# Показать все интерфейсы
ifconfig

# Показать конкретный интерфейс
ifconfig eth0

# Включить интерфейс
ifconfig eth0 up

# Выключить интерфейс
ifconfig eth0 down

# Настроить IP-адрес
ifconfig eth0 192.168.1.100 netmask 255.255.255.0

# Настроить IP-адрес с CIDR
ifconfig eth0 192.168.1.100/24

# Добавить дополнительный IP
ifconfig eth0:0 192.168.1.101

# Показать статистику
ifconfig eth0 | grep -E "(RX|TX)"
```

**Полезные флаги:**
- `-a` - показать все интерфейсы (включая выключенные)
- `-s` - краткая статистика
- `-v` - подробная информация

**Q: С помощью какой утилиты в консоли linux можно захватить трафик для анализа?**
A:
- `tcpdump` - захват пакетов
- `wireshark` - графический анализатор (если есть GUI)
- `tshark` - консольная версия wireshark
- `ngrep` - grep для сетевого трафика

### Системная информация

**Q: Как посмотреть дату/время на хосте linux?**
A:
- `date` - текущая дата и время
- `timedatectl` - управление временем и датой
- `hwclock` - работа с аппаратными часами

**Q: Для чего нужна директория etc?**
A: `/etc` содержит конфигурационные файлы системы и приложений:
- `/etc/passwd` - информация о пользователях
- `/etc/group` - информация о группах
- `/etc/fstab` - точки монтирования файловых систем
- `/etc/hosts` - локальная таблица хостов
- `/etc/network/interfaces` - конфигурация сети

**Q: Какие группы прав на файл существуют?**
A: В Linux есть три группы прав:
- **Owner (владелец)** - права владельца файла
- **Group (группа)** - права группы владельца
- **Others (остальные)** - права всех остальных пользователей

Права: r (read), w (write), x (execute)
Пример: `rwxr-xr--` = 754

## Systemd

**Q: Что такое systemd?**
A: systemd - это система инициализации и управления службами в современных Linux дистрибутивах. Она заменяет традиционный SysV init и обеспечивает:
- Параллельный запуск служб
- Автоматическое управление зависимостями
- Логирование через journald
- Управление устройствами через udev

**Q: Как управлять systemd сервисами?**
A:
- `systemctl start service` - запустить службу
- `systemctl stop service` - остановить службу
- `systemctl restart service` - перезапустить службу
- `systemctl enable service` - включить автозапуск
- `systemctl disable service` - отключить автозапуск
- `systemctl status service` - статус службы
- `systemctl list-units --type=service` - список всех служб

**Q: Как посмотреть логи systemd?**
A:
- `journalctl` - все логи
- `journalctl -u service` - логи конкретной службы
- `journalctl -f` - следить за логами в реальном времени
- `journalctl --since "1 hour ago"` - логи за последний час

## Docker

**Q: Что делает команда docker ps -a?**
A: `docker ps -a` показывает все контейнеры (запущенные и остановленные):
- `docker ps` - только запущенные контейнеры
- `docker ps -a` - все контейнеры
- `docker ps -q` - только ID контейнеров
- `docker ps --format "table {{.Names}}\t{{.Status}}"` - кастомный формат

**Q: Как посмотреть логи контейнера?**
A:
```bash
# Логи конкретного контейнера
docker logs container_name

# Логи с временными метками
docker logs -t container_name

# Следить за логами в реальном времени
docker logs -f container_name

# Последние N строк логов
docker logs --tail 100 container_name

# Логи с определенного времени
docker logs --since "2024-01-01T00:00:00" container_name
```

**Q: Как работать с Docker образами?**
A:
```bash
# Посмотреть все образы
docker images
docker image ls

# Посмотреть образы с фильтром
docker images | grep nginx

# Удалить образ
docker rmi image_name
docker image rm image_name

# Удалить все неиспользуемые образы
docker image prune -a

# Посмотреть историю образа
docker history image_name

# Сохранить образ в файл
docker save -o image.tar image_name

# Загрузить образ из файла
docker load -i image.tar
```

**Q: Как получить информацию о контейнере?**
A:
```bash
# Детальная информация о контейнере
docker inspect container_name

# Только IP-адрес контейнера
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name

# Статистика использования ресурсов
docker stats container_name

# Статистика всех контейнеров
docker stats

# Информация о дисковом пространстве
docker system df
```

## Копирование файлов с/на удаленный сервер

**Q: Как скопировать файл на удаленный сервер?**
A:
- `scp file user@server:/path/` - копирование файла
- `scp -r directory/ user@server:/path/` - копирование директории
- `rsync -avz file user@server:/path/` - синхронизация с rsync
- `sftp user@server` - интерактивная передача файлов

**Q: Как скопировать файл с удаленного сервера?**
A:
- `scp user@server:/path/file .` - копирование файла
- `scp -r user@server:/path/directory/ .` - копирование директории
- `rsync -avz user@server:/path/ .` - синхронизация с rsync

## Troubleshooting

### Основные принципы диагностики

**Q: Как диагностировать проблемы с сетью?**
A:
1. `ping host` - проверка доступности
2. `traceroute host` - трассировка маршрута
3. `nslookup domain` - проверка DNS
4. `netstat -i` - статистика интерфейсов
5. `ip addr show` - конфигурация интерфейсов

**Q: Как диагностировать проблемы с диском?**
A:
1. `df -h` - использование дискового пространства
2. `du -sh /*` - размер директорий
3. `iostat` - статистика ввода/вывода
4. `smartctl -a /dev/sda` - состояние диска (SMART)
5. `dmesg | grep -i error` - ошибки в логах ядра

**Q: Как диагностировать проблемы с памятью?**
A:
1. `free -h` - использование памяти
2. `cat /proc/meminfo` - детальная информация
3. `vmstat 1 5` - статистика виртуальной памяти
4. `dmesg | grep -i "out of memory"` - ошибки нехватки памяти
5. `ps aux --sort=-%mem | head -10` - процессы потребляющие больше всего памяти

**Q: Как читать логи системы?**
A:
1. `journalctl` - логи systemd
2. `tail -f /var/log/syslog` - системные логи
3. `tail -f /var/log/auth.log` - логи аутентификации
4. `dmesg` - логи ядра
5. `less /var/log/messages` - общие системные сообщения

### Полезные команды для диагностики

**Q: Как посмотреть информацию о системе?**
A:
- `uname -a` - информация о ядре
- `cat /etc/os-release` - информация о дистрибутиве
- `lscpu` - информация о процессоре
- `lsblk` - блочные устройства
- `lspci` - PCI устройства
- `lsusb` - USB устройства

**Q: Как мониторить производительность в реальном времени?**
A:
- `top` - общий мониторинг
- `htop` - улучшенный top
- `iotop` - мониторинг ввода/вывода
- `nethogs` - мониторинг сетевого трафика по процессам
- `iftop` - мониторинг сетевых соединений
